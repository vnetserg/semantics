# Поиск семантический дубликатов
В даном репозитории представлено решение задачи поиска семантических дубликатов. Суть задачи в том, чтобы построить модель, способную сказать, являются ли два данных текста семантическими дубликатами.

## Компоненты решения
Решение задачи разбито на следующие независимые модули:
* speller - осуществляет исправление в исходных текстах орфографических ошибок с использованием сервиса Яндекс.Speller
* prepare - осуществляет преобразование исходных текстов в матрицу признаков для классификатора
* model - осуществляет обучение модели, запись на диск и чтение с диска, оценку производительности модели

## Интерфейсы модулей
### speller
Основной способ взаимодействия с модулем:

```speller.py INFILE -o OUTFILE```

* INFILE - csv-файл с входными данными (значения разделены точкой с запятой, без заголовка, кодировка utf-8)
* OUTFILE - файл, в который будет записан результат.

Поддерживаются следующие флаги:
* -l FILE - записать лог преобразований орфографии в файл
* -n NUMBER - обработать только первые NUMBER записей
* -f - отфильтровать те записи, у которых не указан кластер, либо в кластере всего одна запись

### prepare
Основной способ взаимодействия с модулем:

```prepare.py INFILE -o OUTFILE```

* INFILE - csv-файл с входными данными (значения разделены точкой с запятой, без заголовка, кодировка utf-8)
* OUTFILE - файл, в который будет записан результат. Здесь уже значения разделены запятой и заголовок присутствует (умолчания для pandas)

Поддерживаются следующие флаги:
* -n NUMBER - обработать только первые NUMBER записей
* -s NUMBER - разделить результат на два независимых файла, в первом будет NUMBER записей, во втором все остальные
* -r SEED - случайно перемешать строки во входной матрице, используя SEED как семя генератора псевдослучайных чисел


### model
Данный модуль имеет несколько сценариев взеимодействия.

Способы задания источника модели:
* -t TRAINFILE - обучить модель на указанном файле с обучающей выборкой
* -i INFILE - загрузить ранее сохранённую модель из файла

Сохранение модели в файл:
* -o OUTFILE

Использование модели:
* -v TESTFILE - проверить, насколько хорошо модель предскажет значение целевой функции для выборки в данном файле (в выборке должны присутствовать значения целевой функции)
* -p INFILE OUTFILE - предсказать значения целевой функции для выборки из INFILE и записать результат в OUTFILE

Другое:
* -r SEED - задать значение семени генератора псевдослучайных чисел

Пример использования: `model.py -t train.csv -v test.csv -o model.mdl -r 42`
